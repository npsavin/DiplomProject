http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/loggers/mod_log_config.c : 
/ [Apache-SVN] / httpd / httpd / trunk / modules / loggers / mod_log_config.c Log of /httpd/httpd/trunk/modules/loggers/mod_log_config.c  Parent Directory  |   Revision Log Links to HEAD:  ( view ) ( download ) ( annotate )  Sticky Revision:  Revision  1575400  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Mar 7 20:56:24 2014 UTC  (2 months, 2 weeks ago) by  wrowe 
File length: 56905 byte(s)  
Diff to  previous 1575394  ( colored )  CVE-2014-0098 (reported by Rainer Canavan <rainer-apache 7val com>) Segfaults w/ truncated cookie logging. Clean up the cookie logging parser to recognize only the cookie=value pairs, not valueless cookies. This refactors multiple passes over the same string buffer into a single pass parser. Submitted by: wrowe Reviewed by: rpluem, jim   Revision  1575394  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Mar 7 20:45:33 2014 UTC  (2 months, 2 weeks ago) by  wrowe 
File length: 56348 byte(s)  
Diff to  previous 1574518  ( colored )  Revert  r1574518  to get 2.2/2.4/2.x all back in sync for a single fix  Revision  1574518  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Mar 5 15:00:56 2014 UTC  (2 months, 2 weeks ago) by  jim 
File length: 56396 byte(s)  
Diff to  previous 1467765  ( colored )  ensure cookies have name/value   Revision  1467765  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Apr 14 11:16:40 2013 UTC  (13 months, 1 week ago) by  rjung 
File length: 56348 byte(s)  
Diff to  previous 1425360  ( colored )  Fix crash in mod_log_config when logging request end time for a failed request (LogFormat contains %{end}t). The request_config for mod_log_config might not be initialized. PR 54828.   Revision  1425360  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Dec 22 22:29:06 2012 UTC  (17 months ago) by  sf 
File length: 56183 byte(s)  
Diff to  previous 1397636  ( colored )  style fixes, add comment no code change   Revision  1397636  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Oct 12 16:41:34 2012 UTC  (19 months, 1 week ago) by  jailletc36 
File length: 55913 byte(s)  
Diff to  previous 1331110  ( colored )  s/;;/;/  Revision  1331110  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Apr 26 21:44:51 2012 UTC  (2 years ago) by  sf 
File length: 55914 byte(s)  
Diff to  previous 1328133  ( colored )  Replace use of apr_file_write() with apr_file_write_full() to prevent incomplete writes. Add comments in some places where error handling/logging is missing. PR: 53131. Submitted by: Nicolas Viennot <apache viennot biz>, Stefan Fritsch   Revision  1328133  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Apr 19 22:20:34 2012 UTC  (2 years, 1 month ago) by  gregames 
File length: 55850 byte(s)  
Diff to  previous 1243651  ( colored )  PR 53104 - %{abc}C truncates cookies whose values contain '='   Revision  1243651  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Feb 13 18:50:16 2012 UTC  (2 years, 3 months ago) by  sf 
File length: 55867 byte(s)  
Diff to  previous 1225380  ( colored )  Check during config test that directories for access logs exist PR 29941   Revision  1225380  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Dec 28 23:15:04 2011 UTC  (2 years, 4 months ago) by  sf 
File length: 53875 byte(s)  
Diff to  previous 1214015  ( colored )  SECURITY: CVE-2012-0021 (cve.mitre.org) Fix segfault when trying to log a nameless valueless cookie PR: 52256 Submitted by: Rainer Canavan <rainer-apache 7val com>   Revision  1214015  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Dec 14 01:10:52 2011 UTC  (2 years, 5 months ago) by  minfrin 
File length: 53789 byte(s)  
Diff to  previous 1214003  ( colored )  Further clarify the naming of the entity that directly connects to us by calling that entity a client instead of a peer.   Revision  1214003  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Dec 14 00:31:51 2011 UTC  (2 years, 5 months ago) by  minfrin 
File length: 53787 byte(s)  
Diff to  previous 1209766  ( colored )  Further clarify the naming of the entity that originates the request by calling that entity a useragent instead of a client.   Revision  1209766  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Dec 2 23:02:04 2011 UTC  (2 years, 5 months ago) by  sf 
File length: 53781 byte(s)  
Diff to  previous 1206291  ( colored )  Add lots of unique tags to error log messages   Revision  1206291  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Nov 25 19:42:04 2011 UTC  (2 years, 5 months ago) by  minfrin 
File length: 53691 byte(s)  
Diff to  previous 1204968  ( colored )  Introduce a per connection "peer_ip" and a per request "client_ip" to distinguish between the raw IP address of the connection and the effective IP address of the request.   Revision  1204968  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Nov 22 13:10:39 2011 UTC  (2 years, 6 months ago) by  minfrin 
File length: 53693 byte(s)  
Diff to  previous 1174751  ( colored )  Introduce a per request version of the remote IP address, which can be optionally modified by a module when the effective IP of the client is not the same as the real IP of the client (such as a load balancer).   Revision  1174751  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Sep 23 13:39:32 2011 UTC  (2 years, 8 months ago) by  jim 
File length: 53617 byte(s)  
Diff to  previous 1172625  ( colored )  Cleanup effort in prep for GA push: Trim trailing whitespace... no func change   Revision  1172625  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Sep 19 13:40:08 2011 UTC  (2 years, 8 months ago) by  rbowen 
File length: 53618 byte(s)  
Diff to  previous 1142164  ( colored )  Removes the CookieLog directive, which has been documented as deprecated for more than a decade.   Revision  1142164  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Jul 2 07:45:00 2011 UTC  (2 years, 10 months ago) by  sf 
File length: 54007 byte(s)  
Diff to  previous 1125877  ( colored )  Add string valued expressions to ap_expr, do some API cleanup - add possibility to have expressions that evaluate to a string and not to a boolean value - modify ap_expr_parse_cmd() interface to support this and make it more convenient to use in general - rename AP_EXPR_FLAGS_* to AP_EXPR_FLAG_* for consistency   Revision  1125877  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun May 22 07:42:18 2011 UTC  (3 years ago) by  sf 
File length: 54066 byte(s)  
Diff to  previous 1082518  ( colored )  Fix various "variable 'x' set but not used" warnings.   Revision  1082518  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Mar 17 15:04:08 2011 UTC  (3 years, 2 months ago) by  jim 
File length: 53988 byte(s)  
Diff to  previous 1037540  ( colored )  Close PR 50861 where enabling and disabling of buffered logs can cause a segfault. Patch by: Torsten Förtsch < torsten.foertsch@gmx.net >  Revision  1037540  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Nov 21 19:51:41 2010 UTC  (3 years, 6 months ago) by  sf 
File length: 53697 byte(s)  
Diff to  previous 1037143  ( colored )  More ap_expr updates: - minor bump for ap_expr_exec_re() introduced in  r1037504  - actually commit the changes to allow using backreferences in SetEnvIfExpr - automatically add the correct entries to the Vary-header if the result of an expression evaluation depends on a request header (can be turned off by setting the AP_EXPR_FLAGS_DONT_VARY flag) - set AP_EXPR_FLAGS_DONT_VARY in mod_log_config's conditional logging - fix various off-by-one errors in req_table_func   Revision  1037143  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Nov 20 09:13:18 2010 UTC  (3 years, 6 months ago) by  sf 
File length: 53630 byte(s)  
Diff to  previous 1037140  ( colored )  detab  Revision  1037140  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Nov 20 08:59:50 2010 UTC  (3 years, 6 months ago) by  sf 
File length: 53623 byte(s)  
Diff to  previous 1033157  ( colored )  Log errors/infos during expression evaluation and associate the message with the module that is calling ap_expr_exec()   Revision  1033157  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Nov 9 18:59:33 2010 UTC  (3 years, 6 months ago) by  sf 
File length: 53562 byte(s)  
Diff to  previous 992806  ( colored )  Add support for conditional logging depending on an expression. The syntax is a bit unwieldy, the quotes have to start before the 'expr=': CustomLog "logs/cond_log" combined "expr=req('User-Agent') == 'x'"   Revision  992806  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Sep 5 15:44:19 2010 UTC  (3 years, 8 months ago) by  sf 
File length: 52730 byte(s)  
Diff to  previous 979120  ( colored )  Add ErrorLogFormat directive for configuring the error log format, including additional information that is logged once per connection or request. Add error log IDs for connections and request to allow correlating error log lines and the corresponding access log entry.   Revision  979120  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jul 25 21:08:15 2010 UTC  (3 years, 10 months ago) by  rjung 
File length: 52348 byte(s)  
Diff to  previous 951895  ( colored )  Adding sub second timestamps and request end time to mod_log_config. Add special format tokens to %{...}t. The extended syntax allows the form: "WHICH:WHAT". WHICH is either: - "begin": use the time when the request started - "end": take "now" as the time You can omit WHICH, default is "begin". If you omit WHICH, the separating column is not allowed. WHAT is either: - "sec": timestamp in Unix seconds - "msec": timestamp in Unix milliseconds - "msec_frac": millisecond fraction of the Unix timestamp, 3 digits, 0-padded - "usec": timestamp in Unix microseconds - "usec_frac": microsecond fraction of the Unix timestamp 6 digits, 0-padded - anything different from those tokens: use strftime() You can omit WHAT, default is the formatted timestamp as used by the Common Log Format. The implementation uses a new request_config for mod_log_config to pass the request end time around between different calls to log formatters, but the end time is only generated if needed.  Revision  951895  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jun 6 16:59:50 2010 UTC  (3 years, 11 months ago) by  sf 
File length: 49685 byte(s)  
Diff to  previous 905420  ( colored )  Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take advantage of per-module loglevels   Revision  905420  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Feb 1 21:38:15 2010 UTC  (4 years, 3 months ago) by  minfrin 
File length: 49703 byte(s)  
Diff to  previous 834500  ( colored )  mod_log_config: Add the R option to log the handler used within the request. Submitted by: Christian Folini <christian.folini netnea com>   Revision  834500  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Nov 10 15:29:04 2009 UTC  (4 years, 6 months ago) by  sf 
File length: 49541 byte(s)  
Diff to  previous 834013  ( colored )  fix off by one error  Revision  834013  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Nov 9 10:43:16 2009 UTC  (4 years, 6 months ago) by  sf 
File length: 49537 byte(s)  
Diff to  previous 834006  ( colored )  Also remove trailing whitespace in the value   Revision  834006  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Nov 9 09:59:53 2009 UTC  (4 years, 6 months ago) by  sf 
File length: 49310 byte(s)  
Diff to  previous 833738  ( colored )  Simplify code by using apr_strtok   Revision  833738  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Nov 7 19:19:10 2009 UTC  (4 years, 6 months ago) by  sf 
File length: 49753 byte(s)  
Diff to  previous 721034  ( colored )  mod_log_config: Make ${cookie}C correctly match whole cookie names instead of substrings. PR: 28037 Submitted by: Dan Franklin <dan dan-franklin.com>, Stefan Fritsch   Revision  721034  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Nov 26 23:25:37 2008 UTC  (5 years, 5 months ago) by  jim 
File length: 48872 byte(s)  
Diff to  previous 720250  ( colored )  Backported   Revision  720250  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Nov 24 18:33:09 2008 UTC  (5 years, 6 months ago) by  jim 
File length: 48862 byte(s)  
Diff to  previous 693120  ( colored )  Make %k work as it should. No regression noted in perl test framework.   Revision  693120  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Sep 8 14:52:21 2008 UTC  (5 years, 8 months ago) by  jim 
File length: 48807 byte(s)  
Diff to  previous 579517  ( colored )  Add in useful feature. %k which logs the keepalives value. PR: 45762 Dan Poirier < poirier@pobox.com >   Revision  579517  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Sep 26 08:44:37 2007 UTC  (6 years, 7 months ago) by  rpluem 
File length: 48551 byte(s)  
Diff to  previous 579425  ( colored )  * Do case insensitive compares for the type of formats of the pid / tid.   Revision  579425  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Sep 26 01:45:16 2007 UTC  (6 years, 8 months ago) by  trawick 
File length: 48539 byte(s)  
Diff to  previous 578927  ( colored )  mod_log_config: Add format options for %p so that the actual local or remote port can be logged. PR: 43415 Submitted by: Adam Hasselbalch Hansen < ahh@one.com > Extensively commented on and/or modified by Ruediger Pluem and Jeff Trawick   Revision  578927  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Sep 24 19:30:59 2007 UTC  (6 years, 8 months ago) by  rpluem 
File length: 48109 byte(s)  
Diff to  previous 420983  ( colored )  * Remove function format_integer as it is only used by pfmt and just a needless wrapper around apr_itoa. Thus replace its call by apr_itoa.   Revision  420983  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Jul 11 20:33:53 2006 UTC  (7 years, 10 months ago) by  fielding 
File length: 48197 byte(s)  
Diff to  previous 395228  ( colored )  update license header text  Revision  395228  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Apr 19 12:11:27 2006 UTC  (8 years, 1 month ago) by  colm 
File length: 48050 byte(s)  
Diff to  previous 332306  ( colored )  Update the copyright year in all .c, .h and .xml files   Revision  332306  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Nov 10 15:11:44 2005 UTC  (8 years, 6 months ago) by  jim 
File length: 48050 byte(s)  
Diff to  previous 265506  ( colored )  No functional Change: Removing trailing whitespace. This also means that "blank" lines consisting of just spaces or tabs are now really blank lines   Revision  265506  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Aug 31 15:22:08 2005 UTC  (8 years, 8 months ago) by  jim 
File length: 48122 byte(s)  
Diff to  previous 265033  ( colored )  Add ap_append_pid(); This is performed enough to warrant a function I think, especially with the fact that the mapping of getpid() to APR_PID_T_FMT isn't consistant in some areas.   Revision  265033  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Aug 31 12:34:07 2005 UTC  (8 years, 8 months ago) by  trawick 
File length: 48142 byte(s)  
Diff to  previous 208972  ( colored )  mod_log_config: %{hextid}P will log the thread id in hex with APR versions 1.2.0 or higher.   Revision  208972  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jul 3 21:21:46 2005 UTC  (8 years, 10 months ago) by  brianp 
File length: 47762 byte(s)  
Diff to  previous 151408  ( colored )  use struct assignment instead of memcpy so the compiler can decide whether to inline the copy loop or call memcpy  Revision  151408  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Feb 4 20:28:49 2005 UTC  (9 years, 3 months ago) by  jerenkrantz 
File length: 47843 byte(s)  
Diff to  previous 110069  ( colored )  Update copyright year to 2005 and standardize on current copyright owner line.   Revision  110069  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Dec 7 03:41:18 2004 UTC  (9 years, 5 months ago) by  pquerna 
File length: 47807 byte(s)  
Diff to  previous 109866  ( colored )  * mod_log_config.c: Revert  r109866  which used apr_file_writev instead of an apr_file_write w/ a memcpy. Roy Fielding provided a -1 veto on the commit, based on concerns that writev is not guaranteed to be atomic like a write.   Revision  109866  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Dec 5 07:05:23 2004 UTC  (9 years, 5 months ago) by  pquerna 
File length: 47830 byte(s)  
Diff to  previous 106103  ( colored )  mod_log_config.c: Use iovecs to write the log line to eliminate a memcpy   Revision  106103  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Nov 21 18:50:36 2004 UTC  (9 years, 6 months ago) by  nd 
File length: 47807 byte(s)  
Diff to  previous 103991  ( colored )  general property cleanup   Revision  103991  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jun 20 13:08:06 2004 UTC  (9 years, 11 months ago) by  trawick 
File length: 47807 byte(s)  
Diff to  previous 103767  ( colored )  mod_log_config: Fix a bug which prevented request completion time from being logged for I_INSIST_ON_EXTRA_CYCLES_FOR_CLF_COMPLIANCE processing. PR: 29696 Submitted by: Alois Treindl <alois astro.ch> Reviewed by: Jeff Trawick   Revision  103767  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue May 25 19:39:50 2004 UTC  (10 years ago) by  nd 
File length: 47810 byte(s)  
Diff to  previous 103627  ( colored )  this should save one or two cycles   Revision  103627  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu May 6 10:18:07 2004 UTC  (10 years ago) by  jorton 
File length: 47828 byte(s)  
Diff to  previous 103331  ( colored )  * modules/loggers/mod_log_config.c, server/log.c (open_error_log, ap_replace_stderr_log): Use APR_LARGEFILE when opening log files, to allow log files to exceed the 2Gb limit if necessary. PR: 13511   Revision  103331  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Apr 10 17:48:52 2004 UTC  (10 years, 1 month ago) by  nd 
File length: 47812 byte(s)  
Diff to  previous 102783  ( colored )  cleanup log_header_out function: - no need to ask r->err_headers_out, because it's already merged with r->headers_out at this stage - allow multiple headers like Set-Cookie to be logged properly PR: 27787   Revision  102783  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 26 20:15:26 2004 UTC  (10 years, 2 months ago) by  trawick 
File length: 46165 byte(s)  
Diff to  previous 102781  ( colored )  fix an old misfeature: "BufferedLogs Off" would sort-of turn buffered logging on as it set the log writer to the buffered log writer, though it would leave the are-logs-buffered flag off this misfeature combined with recent mutex logic for buffered logs led to a segfault with "BufferedLogs Off"   Revision  102781  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 26 20:00:55 2004 UTC  (10 years, 2 months ago) by  trawick 
File length: 46126 byte(s)  
Diff to  previous 102618  ( colored )  a kind fix for a compile error unfortunately broke an order dependency... the buffered logs array needs to be initialized prior to opening the logs   Revision  102618  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Feb 9 20:31:03 2004 UTC  (10 years, 3 months ago) by  nd 
File length: 46069 byte(s)  
Diff to  previous 102566  ( colored )  fix name of The Apache Software Foundation   Revision  102566  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Feb 8 12:10:29 2004 UTC  (10 years, 3 months ago) by  nd 
File length: 46065 byte(s)  
Diff to  previous 102525  ( colored )  fix copyright dates according to the first checkin   Revision  102525  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Feb 6 22:58:42 2004 UTC  (10 years, 3 months ago) by  nd 
File length: 46065 byte(s)  
Diff to  previous 102361  ( colored )  apply Apache License, Version 2.0   Revision  102361  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jan 18 00:00:18 2004 UTC  (10 years, 4 months ago) by  nd 
File length: 48284 byte(s)  
Diff to  previous 102355  ( colored )  in conservative C declarations still have to be the first in a function.   Revision  102355  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Jan 17 00:16:45 2004 UTC  (10 years, 4 months ago) by  trawick 
File length: 48247 byte(s)  
Diff to  previous 102135  ( colored )  mod_log_config: Fix corruption of buffered logs with threaded MPMs. PR: 25520   Revision  102135  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Jan 1 13:26:26 2004 UTC  (10 years, 4 months ago) by  nd 
File length: 46757 byte(s)  
Diff to  previous 101703  ( colored )  update license to 2004.   Revision  101703  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Nov 5 17:16:00 2003 UTC  (10 years, 6 months ago) by  jorton 
File length: 46757 byte(s)  
Diff to  previous 101021  ( colored )  * modules/loggers/mod_log_config.c (log_request_time): Log the minutes component of the timezone correctly. PR: 23642 Submitted by: Hong-Gunn Chew < hgbug@gunnet.org >   Revision  101021  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Aug 19 16:03:03 2003 UTC  (10 years, 9 months ago) by  nd 
File length: 46750 byte(s)  
Diff to  previous 99818  ( colored )  fix %b format to write really "-" if bytes_sent == 0. Submitted by: Kess   Revision  99818  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed May 14 02:32:41 2003 UTC  (11 years ago) by  trawick 
File length: 46714 byte(s)  
Diff to  previous 99449  ( colored )  fix a comment to explain how to log the thread id Submitted by: nd   Revision  99449  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Apr 19 03:06:30 2003 UTC  (11 years, 1 month ago) by  trawick 
File length: 46718 byte(s)  
Diff to  previous 99442  ( colored )  as Andre' pointed out, we don't need %{pid/tid}P since the user can do %P/%{tid}P or %{pid}P/%{tid}P   Revision  99442  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Apr 18 19:40:11 2003 UTC  (11 years, 1 month ago) by  trawick 
File length: 46893 byte(s)  
Diff to  previous 99439  ( colored )  change the way that thread id is specified in the log format since the previous implementation used a format string already taken by mod_logio now, an optional %P format is used instead thanks to Andre' Malo for pointing out that I chose a format string already used by mod_logio!   Revision  99439  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Apr 18 10:44:11 2003 UTC  (11 years, 1 month ago) by  trawick 
File length: 46624 byte(s)  
Diff to  previous 99032  ( colored )  mod_log_config: Add the ability to log the id of the thread processing the request (%I).   Revision  99032  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Mar 20 21:50:40 2003 UTC  (11 years, 2 months ago) by  wrowe 
File length: 46259 byte(s)  
Diff to  previous 98912  ( colored )   SECURITY: Eliminated leaks of several file descriptors to child processes, such as CGI scripts. PR: 17206 Submitted by: Christian Kratzer < ck@cksoft.de >, Bjoern A. Zeeb < bz@zabbadoz.net > Reviewed by: Joe Orton, Will Rowe   Revision  98912  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Mar 6 23:53:52 2003 UTC  (11 years, 2 months ago) by  nd 
File length: 46293 byte(s)  
Diff to  previous 98648  ( colored )  Minor MMN bump: Forward port: Escape special characters (especially control characters) in mod_log_config to make a clear distinction between client-supplied strings (with special characters) and server-side strings. This was already introduced in version 1.3.25. Obtained from: Patch in 1.3.25-dev by Martin   Revision  98648  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Feb 14 04:17:34 2003 UTC  (11 years, 3 months ago) by  ianh 
File length: 45483 byte(s)  
Diff to  previous 98638  ( colored )  change optional function to return the previous writer, allowing to have mutliple types of writers in the same server. (previously you could only have one) it needs a mmn bump.. sorry guys ;(   Revision  98638  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 13 13:54:04 2003 UTC  (11 years, 3 months ago) by  wrowe 
File length: 45313 byte(s)  
Diff to  previous 98573  ( colored )   Tabs. Runovers. Style violations ... oh my!   Revision  98573  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Feb 3 17:53:28 2003 UTC  (11 years, 3 months ago) by  nd 
File length: 44296 byte(s)  
Diff to  previous 97644  ( colored )  finished that boring job: update license to 2003. Happy New Year! ;-))   Revision  97644  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Nov 25 15:39:56 2002 UTC  (11 years, 6 months ago) by  wrowe 
File length: 44296 byte(s)  
Diff to  previous 96835  ( colored )   Accept '%%' in CustomLog format strings to produce a literal '%'. Submitted by: Andr� Malo < nd@perlig.de >   Revision  96835  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Sep 16 12:43:36 2002 UTC  (11 years, 8 months ago) by  trawick 
File length: 44165 byte(s)  
Diff to  previous 96828  ( colored )  static-ize a function which is not supposed to be exported   Revision  96828  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Sep 15 21:37:32 2002 UTC  (11 years, 8 months ago) by  wrowe 
File length: 44158 byte(s)  
Diff to  previous 96816  ( colored )   Revisit the code that Ian and I discussed on list. Actually pre-flight the access logs so that failure conditions are noted earlier, and return out of the code using the != OK convention from ap_hook_open_logs.   Revision  96816  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Sep 14 20:54:16 2002 UTC  (11 years, 8 months ago) by  wrowe 
File length: 44484 byte(s)  
Diff to  previous 96814  ( colored )   Return mismatches... this solution simply won't work, as Ian reminded me. Needs more work/time I don't have this afternoon, reverting to r 1.91   Revision  96814  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Sep 14 20:36:30 2002 UTC  (11 years, 8 months ago) by  wrowe 
File length: 44742 byte(s)  
Diff to  previous 96666  ( colored )   At least follow the proper failure path for failure to open the log file or logging process. Doesn't fix the lack of preflight testing. Reviewed by: Ian Holsman   Revision  96666  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Sep 6 03:00:11 2002 UTC  (11 years, 8 months ago) by  ianh 
File length: 44484 byte(s)  
Diff to  previous 96547  ( colored )  change the log_writer declaration so that it takes a request_rec instead of just a pool. (so that the writer can get to things like hostname)   Revision  96547  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Aug 27 17:20:29 2002 UTC  (11 years, 9 months ago) by  ianh 
File length: 44481 byte(s)  
Diff to  previous 96544  ( colored )  its >>FNAME<< not >>name<< doh   Revision  96544  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Aug 27 11:18:57 2002 UTC  (11 years, 9 months ago) by  trawick 
File length: 44479 byte(s)  
Diff to  previous 96538  ( colored )  make the type of the variable explicit to quiet a gcc warning   Revision  96538  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Aug 26 23:23:45 2002 UTC  (11 years, 9 months ago) by  ianh 
File length: 44475 byte(s)  
Diff to  previous 96099  ( colored )  introduce 2 new callback oppurtunities to allow a 3rd party module to do the actual writing of the log file. also change buffered writing to make it runtime configurable instead of compile time configurable. i'm not 100% on the buffered output, mainly because I'm not sure it worked in a thread safe way *before* this change   Revision  96099  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jul 17 16:08:53 2002 UTC  (11 years, 10 months ago) by  trawick 
File length: 40952 byte(s)  
Diff to  previous 95915  ( colored )  use APR_TIME_T_FMT when formatting apr_time_t   Revision  95915  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jun 30 03:53:32 2002 UTC  (11 years, 10 months ago) by  brianp 
File length: 40901 byte(s)  
Diff to  previous 95891  ( colored )  Replaced APR_USEC_PER_SEC division with the new apr_time_sec() macro   Revision  95891  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jun 26 19:45:07 2002 UTC  (11 years, 11 months ago) by  jerenkrantz 
File length: 40925 byte(s)  
Diff to  previous 95588  ( colored )  Change conn_rec->keepalive to an enumerated value of AP_CONN_UNKNOWN AP_CONN_CLOSE AP_CONN_KEEPALIVE This also fixes a problem where ap_discard_request_body would not discard the body when keepalive was 0. This actually meant the keepalive status was unknown *not* closed, but no one ever remembered that. This problem was seen with mod_dav sending error responses (as reported by Karl Fogel). Suggested by: Greg "this isn't the '80s" Stein Reviewed by: Greg Ames   Revision  95588  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jun 9 04:48:41 2002 UTC  (11 years, 11 months ago) by  brianp 
File length: 40904 byte(s)  
Diff to  previous 95587  ( colored )  My logger timestamp cache was using an apr_time_t as the cache key. apr_time_t has a resolution of 1 microsecond. For some reason, the cache hit rate wasn't very high. :-) With this change, the cache key is now the time in seconds, not usec.   Revision  95587  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jun 9 03:44:03 2002 UTC  (11 years, 11 months ago) by  wrowe 
File length: 40894 byte(s)  
Diff to  previous 95068  ( colored )   Well the wrappers work out well... nice to be able to put off committing these API changes until the evening ;)   Revision  95068  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon May 13 20:17:31 2002 UTC  (12 years ago) by  wrowe 
File length: 40894 byte(s)  
Diff to  previous 95046  ( colored )   Hmmm... gotta ask the wisdom in using aspecific types over apr_time_*_t types.   Revision  95046  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun May 12 08:09:13 2002 UTC  (12 years ago) by  brianp 
File length: 40882 byte(s)  
Diff to  previous 93965  ( colored )  Added caching of formatted timestamps to speed up the access logger when using standard time format   Revision  93965  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Mar 16 18:26:58 2002 UTC  (12 years, 2 months ago) by  wrowe 
File length: 39138 byte(s)  
Diff to  previous 93918  ( colored )   Eliminate potential ap_server_root_relative segfaults, with the input of Jeff Trawick's style changes to the first patches. Doesn't include the fixes to ssl [more complex], and we won't trap errors that involve ap_serverroot, since we presume that was normalized on the way in. Therefore, testing ap_server_root_relative(DEFAULT_FOO) cases should never become necessary.   Revision  93918  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Mar 13 20:48:07 2002 UTC  (12 years, 2 months ago) by  fielding 
File length: 38926 byte(s)  
Diff to  previous 93733  ( colored )  Update our copyright for this year.   Revision  93733  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Mar 6 17:55:38 2002 UTC  (12 years, 2 months ago) by  ianh 
File length: 38926 byte(s)  
Diff to  previous 93063  ( colored )  apr-utils rename apr_ansi_time_to_apr_time and apr_exploded_time_t. PR: Obtained from: Submitted by: Thom May < thom@planetarytramp.net > Reviewed by: Ian Holsman   Revision  93063  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Jan 28 23:49:40 2002 UTC  (12 years, 3 months ago) by  aaron 
File length: 38936 byte(s)  
Diff to  previous 92798  ( colored )  The pre_config hook now takes a return value. This allows modules to cause the server to bail out under error conditions.   Revision  92798  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Jan 10 03:23:33 2002 UTC  (12 years, 4 months ago) by  ianh 
File length: 38921 byte(s)  
Diff to  previous 92792  ( colored )  wrowe's veto'd this.   Revision  92792  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Jan 10 01:03:41 2002 UTC  (12 years, 4 months ago) by  ianh 
File length: 41913 byte(s)  
Diff to  previous 92758  ( colored )  new option LogExcludeByType main use is so that you can ignore logging images PR: Obtained from: Submitted by: Reviewed by:   Revision  92758  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jan 6 21:03:51 2002 UTC  (12 years, 4 months ago) by  brianp 
File length: 38921 byte(s)  
Diff to  previous 92752  ( colored )  Rearranged the log_request_time() code to eliminate the allocation of an 8KB buffer on the stack when not using a custom time format   Revision  92752  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jan 6 08:01:34 2002 UTC  (12 years, 4 months ago) by  brianp 
File length: 38390 byte(s)  
Diff to  previous 92497  ( colored )  Bypass a strdup and an 8KB local variable in the common case where the logger is using the default time format   Revision  92497  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Dec 16 09:54:14 2001 UTC  (12 years, 5 months ago) by  brianp 
File length: 38389 byte(s)  
Diff to  previous 92149  ( colored )  Replaced an instance of apr_pool_userdata_setn() with apr_pool_userdata_set().. the value of "userdata_key" is an address on the stack when compiled with gcc 2.95.3 on Solaris/Sparc, so storing the address directly in the hash table is unsafe.   Revision  92149  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Nov 24 00:08:30 2001 UTC  (12 years, 6 months ago) by  ianh 
File length: 38391 byte(s)  
Diff to  previous 91681  ( colored )  change open_logs hook to return a value, allowing you to flag a error while opening logs Obtained from: Doug MacEachern   Revision  91681  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Oct 29 15:19:03 2001 UTC  (12 years, 6 months ago) by  wrowe 
File length: 38377 byte(s)  
Diff to  previous 91083  ( colored )   Use the _setn flavor which will avoid strdup'ing these strings, and skip the cleanups we don't need. Submitted by: Brian Pane < bpane@pacbell.net >   Revision  91083  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Sep 19 06:53:26 2001 UTC  (12 years, 8 months ago) by  jerenkrantz 
File length: 38387 byte(s)  
Diff to  previous 90737  ( colored )  The call to apr_explode_localtime() in mod_log_config is one of the more expensive operations in the httpd. This patch attempts to reduce the overhead by caching the result for 15 seconds. Submitted by: Brian Pane < bpane@pacbell.net > Reviewed by: Cliff Woolley, Ryan Bloom, Dean Gaudet, Justin Erenkrantz   Revision  90737  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Aug 27 20:50:01 2001 UTC  (12 years, 9 months ago) by  orlikowski 
File length: 38352 byte(s)  
Diff to  previous 90417  ( colored )  Fix a case where on restart, an admin started logging, and the logging code waited to start until the second pass (assuming we were just starting up) to open the log file. Also fix a typo.   Revision  90417  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Aug 20 19:43:03 2001 UTC  (12 years, 9 months ago) by  wrowe 
File length: 38232 byte(s)  
Diff to  previous 90361  ( colored )   *) Changed the late-1.3 log_config substitution %c to %X (logs the status of the closed connection) as it conflicts with the far more common, historical ssl logging directive %...{var}c.   Revision  90361  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Aug 19 16:01:05 2001 UTC  (12 years, 9 months ago) by  dougm 
File length: 38088 byte(s)  
Diff to  previous 89738  ( colored )  adjust to apr_uri_ rename   Revision  89738  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Jul 26 18:40:27 2001 UTC  (12 years, 10 months ago) by  jwoolley 
File length: 38099 byte(s)  
Diff to  previous 89727  ( colored )  Fix printf() warnings related to long->apr_off_t swap   Revision  89727  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Jul 26 15:53:15 2001 UTC  (12 years, 10 months ago) by  wrowe 
File length: 38087 byte(s)  
Diff to  previous 89686  ( colored )   Change the length of the content args to apr_off_t identifiers, and fix mod_negotation to treat a size of -1 and indeterminate, instead of 0.   Revision  89686  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Jul 24 22:55:29 2001 UTC  (12 years, 10 months ago) by  gregames 
File length: 38082 byte(s)  
Diff to  previous 89600  ( colored )  Reduce CPU consumption in conv_10 function, used to format "%d" by apr_*printf This includes two changes to APR: * new functions apr_itoa, apr_ltoa, and apr_off_t_toa that provide itoa-type functionality based on pools * Inline code in inet_ntop4 to replace sprintf for converting binary IP addresses into dotted-decimal format and two changes to Apache: * use the apr_itoa functions in setting the content length, in place of apr_psprintf * use the apr_itoa functions to replace frequent uses of 'sprintf("%d",...)' in mod_log_config. Submitted by: Brian Pane Reviewed by: Dean Gaudet, Greg Ames   Revision  89600  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jul 18 19:41:20 2001 UTC  (12 years, 10 months ago) by  wrowe 
File length: 38103 byte(s)  
Diff to  previous 89561  ( colored )   Remove last public vestigages of APR_INHERIT   Revision  89561  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Jul 16 21:07:40 2001 UTC  (12 years, 10 months ago) by  wrowe 
File length: 38074 byte(s)  
Diff to  previous 89198  ( colored )   Obvious files that need inheritance, correct me if I'm wrong.   Revision  89198  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue May 22 01:31:12 2001 UTC  (13 years ago) by  fielding 
File length: 38060 byte(s)  
Diff to  previous 89127  ( colored )  Moved util_uri to apr-util/uri/apr_uri, which means adding the apr_ prefix to all of the uri functions (yuck), changing some includes, and using APR error codes instead of HTTP-specific error codes. Other notes to test this patch: - You need to delete the util_uri.h file - exports picks up on this. - I'd like to remove the apr_uri.h from httpd.h, but that might increase the complexity of this patch even further. Once this patch is accepted (in some form), then I can focus on removing apr_uri.h from httpd.h entirely. I need baby steps (heh) right now. - I imagine that this might break a bunch of stuff in Win32 or other OS builds with foreign dependency files. Any help here is appreciated. This is a start... -- justin Submitted by: Justin Erenkrantz Reviewed by: Roy Fielding   Revision  89127  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed May 16 13:49:40 2001 UTC  (13 years ago) by  stoddard 
File length: 38059 byte(s)  
Diff to  previous 88974  ( colored )  Do not start piped log processes during the config file preflight. This change also circumvents a problem on Windows where the rotatelog processes created during preflight was not getting cleaned up properly.   Revision  88974  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed May 2 13:37:22 2001 UTC  (13 years ago) by  stoddard 
File length: 37613 byte(s)  
Diff to  previous 88910  ( colored )  mod_log_config: %c connection status incorrectly logged as "-" (non-keepalive) when MaxKeepAliveRequests is set to 0.   Revision  88910  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Apr 21 22:17:59 2001 UTC  (13 years, 1 month ago) by  rbb 
File length: 37575 byte(s)  
Diff to  previous 88908  ( colored )  Put the keep-alive connection logging back.   Revision  88908  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Apr 21 12:23:37 2001 UTC  (13 years, 1 month ago) by  fielding 
File length: 37238 byte(s)  
Diff to  previous 88904  ( colored )  Revert the change that moved keepalives out of conn_rec. That variable controls the number of requests per connection, regardless of the protocol used by the request.   Revision  88904  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Apr 20 17:59:05 2001 UTC  (13 years, 1 month ago) by  stoddard 
File length: 37260 byte(s)  
Diff to  previous 88888  ( colored )  Fix seg fault at start-up introduced by Ryan's change to enabl modules to specify their own logging tags. mod_log_config registers an optional function, ap_register_log_handler(). ap_register_log_handler() was being called by http_core before the directive hash table was created. This patch creates the directive hash table before ap_register_log_handler() is registered as an optional function. Submitted by: [jean-frederic clere < jfrederic.clere@fujitsu-siemens.com >] Reviewed by: Jeff Trawick, Bill Stoddard   Revision  88888  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Apr 18 21:06:07 2001 UTC  (13 years, 1 month ago) by  rbb 
File length: 36916 byte(s)  
Diff to  previous 88881  ( colored )  Allow modules to specify their own logging format specifier. Basically, mod_log_config has registered an optional function, that other modules can use to specify a function to be called. This is analogous to the way that mod_include works. This also allows http to do the connection logging itself, without exposing HTTP specific pieces to other modules.   Revision  88881  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Apr 18 03:53:34 2001 UTC  (13 years, 1 month ago) by  rbb 
File length: 36695 byte(s)  
Diff to  previous 88484  ( colored )  Move the keepalives field out of the conn_rec and into an HTTP specific connection record. This also moves some HTTP specific back out of the core and into the HTTP module.   Revision  88484  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Mar 9 20:30:34 2001 UTC  (13 years, 2 months ago) by  trawick 
File length: 36478 byte(s)  
Diff to  previous 88271  ( colored )  tweak ap_get_remote_host() so that the caller can find out if she got back an IP address mod_access needed to know this, but the old code didn't handle IPv6   Revision  88271  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 22 04:05:58 2001 UTC  (13 years, 3 months ago) by  rbb 
File length: 36472 byte(s)  
Diff to  previous 88189  ( colored )  Add a couple of GCC attribute tags to printf style functions. This also fixes a couple of mismatched parameters highlighted revealed by the attribute. Submitted by: Jon Travis < jtravis@covalent.net >   Revision  88189  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Feb 16 13:38:31 2001 UTC  (13 years, 3 months ago) by  martin 
File length: 36472 byte(s)  
Diff to  previous 88184  ( colored )  Rename the module structures so that the exported symbol matches the file name, and it is easier to automate the installation process (generating LoadModule directives from the module filenames). Next step is to remove the 4th argument to the APACHE_MODULE macro completely and require people to use the matching names, and to reduce the LoadModule directive to 1 argument.... Objections?   Revision  88184  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Feb 16 04:26:53 2001 UTC  (13 years, 3 months ago) by  fielding 
File length: 36472 byte(s)  
Diff to  previous 88060  ( colored )  Update copyright to 2001   Revision  88060  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Feb 10 13:05:29 2001 UTC  (13 years, 3 months ago) by  gstein 
File length: 36467 byte(s)  
Diff to  previous 88046  ( colored )  Clean up some of the includes: - explicitly include apr_lib.h since ap_config.h doesn't - use apr_want.h where possible - use APR_HAVE_ where possible - remove some unneeded includes   Revision  88046  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Feb 10 03:38:48 2001 UTC  (13 years, 3 months ago) by  stoddard 
File length: 36445 byte(s)  
Diff to  previous 88019  ( colored )  Add new LogFormat directive, %D, to log time it takes to serve a request in microseconds.   Revision  88019  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 8 07:45:33 2001 UTC  (13 years, 3 months ago) by  dougm 
File length: 36156 byte(s)  
Diff to  previous 87731  ( colored )  renaming various functions for consistency sake see:  http://apr.apache.org/~dougm/apr_rename.pl  PR: Obtained from: Submitted by: Reviewed by:   Revision  87731  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Jan 19 07:04:36 2001 UTC  (13 years, 4 months ago) by  wrowe 
File length: 36122 byte(s)  
Diff to  previous 87697  ( colored )   The big change. This is part 3 of the apr-util symbols rename, please see the first commit of srclib/apr-util/include (cvs apr-util/include) for the quick glance at symbols changed.   Revision  87697  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jan 17 15:52:12 2001 UTC  (13 years, 4 months ago) by  wrowe 
File length: 36119 byte(s)  
Diff to  previous 87604  ( colored )   Provide apr_pool_t arg to register_hooks, since anything they do in that step -must- be done with a pool that will not outlive the cmd pool, from which they may have been dynamically loaded.   Revision  87604  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jan 7 19:55:59 2001 UTC  (13 years, 4 months ago) by  ben 
File length: 36110 byte(s)  
Diff to  previous 87136  ( colored )  Make handlers use hooks.   Revision  87136  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Nov 30 00:31:03 2000 UTC  (13 years, 5 months ago) by  rbb 
File length: 36157 byte(s)  
Diff to  previous 86915  ( colored )  Enable logging a cookie with mod_log_config Submitted by: Sander van Zoest < sander@covalent.net >   Revision  86915  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Nov 10 19:01:33 2000 UTC  (13 years, 6 months ago) by  rbb 
File length: 35422 byte(s)  
Diff to  previous 86852  ( colored )  Fix a lot of the fallback from the apr_ssize_t to apr_size_t change Submitted by: Victor J. Orlikowski < v.j.orlikowski@gte.net >   Revision  86852  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Nov 7 00:58:49 2000 UTC  (13 years, 6 months ago) by  rbb 
File length: 35425 byte(s)  
Diff to  previous 86819  ( colored )  Always compute the content-length regardless of whether it is sent to the client or not. The reason for this, is that it allows us to log the bytes sent to the client correctly. This also simplifies the content-length filter a bit, by making it a single pass through the brigade.   Revision  86819  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Nov 3 03:08:31 2000 UTC  (13 years, 6 months ago) by  stoddard 
File length: 35563 byte(s)  
Diff to  previous 86818  ( colored )  Merge the 1.3 patch to add support for logging query string in such a way that "%m %U%q %H" is the same as "%r".   Revision  86818  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Nov 3 03:00:57 2000 UTC  (13 years, 6 months ago) by  stoddard 
File length: 35269 byte(s)  
Diff to  previous 86814  ( colored )  Merge forward mod_log_config enhancement. Added three log methods: CLF compliant '-' byte count, method and protocol. CVg: then name the system in this line, otherwise delete it.   Revision  86814  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Nov 3 01:31:37 2000 UTC  (13 years, 6 months ago) by  stoddard 
File length: 34490 byte(s)  
Diff to  previous 86649  ( colored )  Add a new LogFormat directive, %c, that will log connection status at the end of the response as follows: 'X' - connection aborted before the response completed. '+' - connection may be kept-alive by the server. '-' - connection will be closed by the server.   Revision  86649  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Oct 18 18:10:00 2000 UTC  (13 years, 7 months ago) by  rbb 
File length: 33914 byte(s)  
Diff to  previous 86609  ( colored )  apr_psprintf doesn't understand %lld, so we should be using %ld PR: 6653 Submitted by: Tomas "�gren" < stric@ing.umu.se > Reviewed by: Ryan Bloom   Revision  86609  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Oct 16 06:05:15 2000 UTC  (13 years, 7 months ago) by  wrowe 
File length: 33915 byte(s)  
Diff to  previous 86488  ( colored )   Renamed all MODULE_EXPORT symbols to AP_MODULE_DECLARE and all symbols for CORE_EXPORT to AP_CORE_DECLARE (namespace protecting the wrapper) and retitled API_EXPORT as AP_DECLARE and APR_EXPORT as APR_DECLARE. All _VAR_ flavors changes to _DATA to be absolutely clear. Thank you Greg, for the most obvious suggestion.   Revision  86488  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Oct 9 23:35:12 2000 UTC  (13 years, 7 months ago) by  rbb 
File length: 33905 byte(s)  
Diff to  previous 86445  ( colored )  We need to flush all logs when the child exits. To do this, we just create a child_init hook, and use it to register a cleanup for child exit. PR: 6550   Revision  86445  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Oct 8 04:37:04 2000 UTC  (13 years, 7 months ago) by  rbb 
File length: 33786 byte(s)  
Diff to  previous 86008  ( colored )  Make mod_log_config compile cleanly when using BUFFERED_LOGS PR: 6519 Submitted by: Mike Abbott < mja@sgi.com > Reviewed by: Ryan Bloom   Revision  86008  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Aug 6 06:07:53 2000 UTC  (13 years, 9 months ago) by  wrowe 
File length: 33683 byte(s)  
Diff to  previous 85976  ( colored )   Remaining cleanup of ap_ -> apr_ and AP_ -> APR_ transformation... see src/lib/apr/apr_compat.h for most details. Also a few minor nits to get Win32 to build. PR: Obtained from: Submitted by: Reviewed by:   Revision  85976  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Aug 2 05:27:38 2000 UTC  (13 years, 9 months ago) by  dougm 
File length: 33633 byte(s)  
Diff to  previous 85881  ( colored )  prefix libapr functions and types with apr_   Revision  85881  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Jul 25 03:26:31 2000 UTC  (13 years, 10 months ago) by  wrowe 
File length: 33556 byte(s)  
Diff to  previous 85867  ( colored )   Undo the damage to mod_isapi (leave placeholders for new functions though) and add APR_EOL_STR to log files (precomiled, of course :) PR: Obtained from: Submitted by: Reviewed by:   Revision  85867  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Jul 21 19:50:58 2000 UTC  (13 years, 10 months ago) by  rbb 
File length: 33503 byte(s)  
Diff to  previous 85767  ( colored )  Move all APR functions related to strings to their own directory, and create a new header for those functions. This is the first step to removing the apr/lib directory completely, and moving those files/functions to descriptive directories.   Revision  85767  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jul 5 18:01:52 2000 UTC  (13 years, 10 months ago) by  rbb 
File length: 33478 byte(s)  
Diff to  previous 85723  ( colored )  Remove some warnings from the latest compile. I don't know why these haven't turned up before. We were using the wrong types in our printf calls for times.   Revision  85723  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jun 28 14:33:48 2000 UTC  (13 years, 10 months ago) by  trawick 
File length: 33477 byte(s)  
Diff to  previous 85600  ( colored )  Include strings.h for strcasecmp(), strncasecmp(), and bzero(). Include time.h for time(). This removes a bunch of compiler warnings with gcc -Wall on AIX. Submitted by: Jeff Trawick, Victor Orlikowski   Revision  85600  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat Jun 17 16:53:50 2000 UTC  (13 years, 11 months ago) by  ben 
File length: 33427 byte(s)  
Diff to  previous 85558  ( colored )  More command handler updates.   Revision  85558  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Jun 12 23:03:05 2000 UTC  (13 years, 11 months ago) by  rbb 
File length: 33351 byte(s)  
Diff to  previous 85553  ( colored )  Protect system header files with the appropriate macros.   Revision  85553  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Jun 12 21:47:17 2000 UTC  (13 years, 11 months ago) by  rbb 
File length: 33323 byte(s)  
Diff to  previous 85318  ( colored )  Clean up a big chunk of ap_config.h. This basically stops ap_config.h from including any files. Because of this change, other files must include their own headers. I also cleaned up a couple of other bugs in some modules because I had to compile them all. I expect this to break multiple platforms, but this will be fixed over time. The massive configure cleanup is almost done. I will go through the files one more time after this commit.   Revision  85318  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat May 27 22:40:44 2000 UTC  (14 years ago) by  wrowe 
File length: 33303 byte(s)  
Diff to  previous 85309  ( colored )   PR: Obtained from: Submitted by: Reviewed by: Reverse out all _EXPORT_VAR changes back to their original _VAR_EXPORT names for linkage (API_, CORE_, and MODULE_).   Revision  85309  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sat May 27 05:28:02 2000 UTC  (14 years ago) by  wrowe 
File length: 33303 byte(s)  
Diff to  previous 85045  ( colored )   This patch corrects the issues from the AP_EXPORT and linkage specification arguments to the ap_hooks.h declarations. As with the APR_ and AP_ patches, API_VAR_EXPORT becomes API_EXPORT_VAR, and MODULE_VAR_EXPORT becomes MODULE_EXPORT_VAR. I will be happy to revert the inclusion of ap_config.h from httpd.h if this bothers anyone. More individual modules need to be patched if we do so. The API_EXPORTs all moved into central storage in the ap_config.h header. Without WIN32 or API_STATIC compile time declarations, these macros remain no-ops. This patch also moves the following data from http_main to http_config: const char *ap_server_argv0; const char *ap_server_root; ap_array_header_t *ap_server_pre_read_config; ap_array_header_t *ap_server_post_read_config; ap_array_header_t *ap_server_config_defines; And the following variables had already moved into ap_hooks.c: ap_pool_t *g_pHookPool; (initialized now in http_config) int g_bDebugHooks; (out of http_config) const char *g_szCurrentHookName; (out of http_config) The changes to http_main.c are in preparation for that module to move out to a seperate .exe for win32. Other platforms will be unaffected, outside of these changes.   Revision  85045  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Apr 26 07:14:39 2000 UTC  (14 years, 1 month ago) by  dougm 
File length: 33303 byte(s)  
Diff to  previous 85018  ( colored )  add AP_ prefix to *HOOK* macros   Revision  85018  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Apr 23 12:24:10 2000 UTC  (14 years, 1 month ago) by  trawick 
File length: 33297 byte(s)  
Diff to  previous 84963  ( colored )  ap_open(..,APR_OS_DEFAULT,..) uses perms 0666 instead of 0777 on Unix; access_log and error_log now created with these perms; non- Unix is unaffected   Revision  84963  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Apr 14 15:59:20 2000 UTC  (14 years, 1 month ago) by  rbb 
File length: 33461 byte(s)  
Diff to  previous 84879  ( colored )  Change ap_context_t to ap_pool_t. This compiles, runs, and serves pages on Linux, but probably breaks somewhere.   Revision  84879  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Mar 31 09:05:25 2000 UTC  (14 years, 1 month ago) by  fielding 
File length: 33497 byte(s)  
Diff to  previous 84751  ( colored )  Update to Apache Software License version 1.1   Revision  84751  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Mar 13 20:27:29 2000 UTC  (14 years, 2 months ago) by  jim 
File length: 33642 byte(s)  
Diff to  previous 84725  ( colored )  Backport the CSS security fixes to Apache 2.0a. Or is that forward port? My sense of direction is all confused. PR: Obtained from: Submitted by: Reviewed by:   Revision  84725  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Fri Mar 10 00:07:37 2000 UTC  (14 years, 2 months ago) by  rbb 
File length: 33615 byte(s)  
Diff to  previous 84598  ( colored )  Fix all the License issues. Including: s/Apache Group/Apache Software Foundation/ s/1999/2000/ s/Sascha's license/ASF license   Revision  84598  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Feb 10 13:24:13 2000 UTC  (14 years, 3 months ago) by  dreid 
File length: 33489 byte(s)  
Diff to  previous 84497  ( colored )  Small changes to remove some compiler complaints.   Revision  84497  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Jan 19 02:42:17 2000 UTC  (14 years, 4 months ago) by  rbb 
File length: 33491 byte(s)  
Diff to  previous 84413  ( colored )  Manoj has been pushing for this for a while, but I've been too dense to understand that he was right. :-) Basically, this makes the modules use ap_config to test for header file inclusion. This method is not to be used for larger modules that run autoconf theirselves. Including ap_config is only valid for modules which rely on Apache to do their configuration. Currently, this is only the core modules.   Revision  84413  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Jan 9 05:18:31 2000 UTC  (14 years, 4 months ago) by  dgaudet 
File length: 33440 byte(s)  
Diff to  previous 84376  ( colored )  time overhaul: - ap_time_t is a 64-bit scalar, microseconds since epoch - ap_exploded_time_t corresponds to struct tm with a few extras probably broken on anything except linux.   Revision  84376  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Dec 30 18:31:29 1999 UTC  (14 years, 4 months ago) by  rbb 
File length: 33081 byte(s)  
Diff to  previous 84355  ( colored )  Some changes to the ap_strftime function. We now inform the user of the length of the string written, and we return a status code. I expect the status code to mean a bit more on Windows than it currently does on Unix.   Revision  84355  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Dec 21 21:41:53 1999 UTC  (14 years, 5 months ago) by  rbb 
File length: 33047 byte(s)  
Diff to  previous 84338  ( colored )  Remove a bunch of functions that are being replaced by functions in APR. Also finished porting Apache to use APR in most cases.   Revision  84338  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Dec 20 16:38:39 1999 UTC  (14 years, 5 months ago) by  rbb 
File length: 32806 byte(s)  
Diff to  previous 84032  ( colored )  First step in getting Apache to use APR's time libraries. This gets a good number of them, but I think there are more time values still in the Apache code. This works under Linux, but has not been tested anywhere else.   Revision  84032  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Sun Oct 24 19:24:13 1999 UTC  (14 years, 7 months ago) by  ben 
File length: 32655 byte(s)  
Diff to  previous 84007  ( colored )  Size rigour.   Revision  84007  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Oct 20 12:50:12 1999 UTC  (14 years, 7 months ago) by  rbb 
File length: 32648 byte(s)  
Diff to  previous 83996  ( colored )  Add a status value to ap_log_error and ap_log_rerror. This allows us to use apr_status codes in our error logs. The main advantage of this, is portable error codes. Now, Windows will finally be able to use errno!   Revision  83996  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Oct 14 14:36:49 1999 UTC  (14 years, 7 months ago) by  rbb 
File length: 32591 byte(s)  
Diff to  previous 83927  ( colored )  I missed one function when swapping paramters. This fixes it. I think I have caught them all this time. I really hope this is the final time I have to swap parameters.   Revision  83927  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Mon Oct 4 16:38:16 1999 UTC  (14 years, 7 months ago) by  rbb 
File length: 32591 byte(s)  
Diff to  previous 83879  ( colored )  First patch to re-order function parameters. This one gets the low hanging fruit, and moves most of the result parameters to the first argument. Future patches in this series will move the rest of the result parameters to the beginning of the list, and will move the context's to the end of the list   Revision  83879  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Wed Sep 8 14:15:55 1999 UTC  (14 years, 8 months ago) by  rbb 
File length: 32591 byte(s)  
Diff to  previous 83852  ( colored )  Remove all of the calls to functions like "ap_popenf". These functions were moved down to APR, but they are being removed. They are not portable, and were only moved down for backwards compatability. With this change, they can be safely removed, which is the next commit on it's way. Submitted by: Ryan Bloom and Paul Reder   Revision  83852  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Tue Aug 31 05:35:52 1999 UTC  (14 years, 8 months ago) by  rbb 
File length: 32542 byte(s)  
Diff to  previous 83770  ( colored )  Changed pools to contexts. Tested with prefork and pthread mpm's. I'll check this out tomorrow and make sure everything was checked in correctly.   Revision  83770  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Aug 26 14:18:40 1999 UTC  (14 years, 9 months ago) by  fielding 
File length: 32381 byte(s)  
Diff to  previous 83767  ( colored )  Start to implement module-defined hooks that are a) fast and b) typesafe. Replace pre_connection module call with a register_hook call and implement pre_connection as a hook. The intent is that these hooks will be extended to allow Apache to be multi-protocol, and also to allow the calling order to be specified on a per-hook/per-module basis. [Ben Laurie] Port a bunch of modules to the new module structure. ["Michael H. Voase" < mvoase@midcoast.com.au >] Submitted by: Ben Laurie   Revision  83767  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Modified  Thu Aug 26 13:57:37 1999 UTC  (14 years, 9 months ago) by  fielding 
File length: 32605 byte(s)  
Diff to  previous 83751  ( colored )  user and ap_auth_type fields were moved from connection_rec to request_rec Submitted by: Ryan Bloom   Revision  83751  - ( view ) ( download ) ( annotate ) -  [select for diffs] 
 Added  Tue Aug 24 06:55:44 1999 UTC  (14 years, 9 months ago) by  fielding 
File length: 32617 byte(s)   Apache 1.3.9 baseline for the Apache 2.0 repository. Obtained from: Apache 1.3.9 (minus unused files), tag APACHE_1_3_9 Submitted by: Apache Group   This form allows you to request diffs between any two revisions of this file. For each of the two "sides" of the diff, enter a numeric revision.     Diffs between   and     Type of Diff should be a  Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side infrastructure at apache.org ViewVC Help Powered by  ViewVC 1.2-dev   


